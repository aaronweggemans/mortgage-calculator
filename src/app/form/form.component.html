<div class="text-jwz-primary">
  <p class="mb-3 h3">Bereken hier uw hypotheek.</p>

  <mat-stepper orientation="vertical" [linear]="true" #stepper>
    <form [formGroup]="hypotheek" (ngSubmit)="submitForm()">
      <!-- Bruto jaar inkomen plus evt. partner -->
      <mat-step>
        <div class="card bg-light p-4 m-2">
          <ng-template matStepLabel>Wat is uw bruto jaarinkomen?</ng-template>
          <div class="form-group">
            <p class="h6 text-jwz-primary">Wat is uw bruto jaar inkomen.</p>
            <p class="text-jwz-primary">Uw bruto jaar inkomen is het inkomen dat u geniet elke kaar.</p>
            <input class="form-control mb-3" id="bruto-jaarinkomen" type="number" formControlName="brutoInkomen">
            <ng-container *ngTemplateOutlet="errorHandler; context: { $implicit: brutoInkomen }"></ng-container>

            <p class="text-jwz-primary">Wat is uw leeftijd</p>
            <input class="form-control mb-3" id="leeftijd" type="number" formControlName="leeftijd">
            <ng-container *ngTemplateOutlet="errorHandler; context: { $implicit: leeftijd }"></ng-container>
            
            <mat-slide-toggle color="primary" class="mb-3" formControlName="partner" (change)="togglePartner($event)">Partner</mat-slide-toggle>
          
            <div id="partner-form-group" *ngIf="partner?.value">
              <p class="text-jwz-primary">Bruto jaarinkomen van uw partner</p>
              <input class="form-control mb-3" id="bruto-jaarinkomen-partner" type="number" formControlName="brutoInkomenPartner">
              <ng-container *ngTemplateOutlet="errorHandler; context: { $implicit: brutoInkomenPartner }"></ng-container>

              <p class="text-jwz-primary">Leeftijd van uw partner</p>
              <input class="form-control" id="leeftijd" type="number" formControlName="leeftijdPartner">
              <ng-container *ngTemplateOutlet="errorHandler; context: { $implicit: leeftijdPartner }"></ng-container>
            </div>
            
            <button matStepperNext color="primary" class="next-button" mat-mini-fab aria-label="Next question">
              <mat-icon>arrow_downward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Spaargeld -->
      <mat-step>
        <div class="card bg-light p-4 m-2">
          <ng-template matStepLabel>Voorgaande woning?</ng-template>
          <div class="form-group">
            <p class="h6 text-jwz-primary">Heeft u al eerder een keer een huis gekocht?</p>
            <p class="text-jwz-primary">
              In het geval dat u eerder al een keer een huis heeft gekocht, moet u overdrachtsbelasting betalen. Dit is niet
              het geval bij mensen die voor de eerste keer een woning kopen. Vink a.u.b. hieronder aan of u al eerder een keer
              een huis heeft gekocht.
            </p>

            <mat-slide-toggle class="mb-3" color="primary" formControlName="previousHouse">
              Ik heb eerder een keer een huis gekocht.
            </mat-slide-toggle>
            
            <button matStepperNext color="primary" class="next-button" mat-mini-fab aria-label="Next question">
              <mat-icon>arrow_downward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Spaargeld -->
      <mat-step>
        <div class="card bg-light p-4 m-2">
          <ng-template matStepLabel>Heeft u spaargeld?</ng-template>
          <div class="form-group">
            <p class="h6 text-jwz-primary">U spaargeld.</p>
            <p class="text-jwz-primary">
              Heeft u spaargeld? Zo ja, dit kan namelijk invloed hebben het hypotheek dat u kunt krijgen.
              Tel eventueel ook uw partner's spaargeld hierbij op.
            </p>

            <mat-slide-toggle class="mb-3" color="primary" formControlName="spaargeld" (change)="toggleSpaargeld($event)">Spaargeld</mat-slide-toggle>

            <div class="form-group" *ngIf="spaargeld?.value">
              <input class="form-control" id="totaalGespaard" type="number" formControlName="totaalGespaard">
              <ng-container *ngTemplateOutlet="errorHandler; context: { $implicit: totaalGespaard }"></ng-container>
            </div>
            
            <button matStepperNext color="primary" class="next-button" mat-mini-fab aria-label="Next question">
              <mat-icon>arrow_downward</mat-icon>
            </button>
          </div>
        </div>
      </mat-step>

      <!-- Uitberekenen van de hypotheek -->
      <mat-step>
        <div class="card bg-light p-4 m-2">
          <ng-template matStepLabel>Bereken de hoogte van uw hypotheek.</ng-template>
          <div class="form-group">
            <p class="h6 text-jwz-primary">Bereken uw hypotheek.</p>
            <p class="text-jwz-primary">
              U heeft alle benodigde hypotheek gevens ingevoerd. U kunt nu een berekening maken.
              Druk op de onderste knop om de computer een berekening te laten maken.
            </p>
          <button class="btn btn-primary" (click)="submitForm()">Bereken uw hypotheek</button>
          </div>
        </div>

        <div>
          <button mat-button (click)="stepper.reset()">Reset de pagina en begin opnieuw</button>
        </div>
      </mat-step>
    </form>
  </mat-stepper>
</div>
  
<ng-template #errorHandler let-errorRow>
  <div *ngIf="errorRow?.invalid && (errorRow?.dirty || errorRow?.touched)" class="alert alert-danger" role="alert">
    <div *ngIf="errorRow.hasError('required')">
      U moet hier een valide waarde invullen.
    </div>
    <div *ngIf="errorRow.hasError('min')">
      Negatieve getallen zijn niet toegestaan.
    </div>
    <div *ngIf="errorRow.hasError('max')">
      U heeft hier een te hoog getal!
    </div>
  </div>
</ng-template> 